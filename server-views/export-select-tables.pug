extends layout.pug

block content
  h2 Select the tables to export:

  form(action="/export" method="POST")
    .checkbox-row.checkbox-row--header
      input#export-all(type="checkbox", name="exportAll")
      label(for="export-all")
        svg.checkbox-row__checkbox.checkbox-row__checkbox--outline(large)
          use(xlink:href="#checkbox-outline")
        svg.checkbox-row__checkbox.checkbox-row__checkbox--checked(large)
          use(xlink:href="#checkbox-checked")
        span Tables

    ul.list
      each table in tables
        li.checkbox-row
          input.checkbox-row__input(type="checkbox", name="tableIds[]", id=table.id value=table.id)
          .active-background
          label(for=table.id)
            svg.checkbox-row__checkbox.checkbox-row__checkbox--outline(large)
              use(xlink:href="#checkbox-outline")
            svg.checkbox-row__checkbox.checkbox-row__checkbox--checked(large)
              use(xlink:href="#checkbox-checked")
            = table.name
            | &emsp;
            a.unflashy(href="https://fusiontables.google.com/DataSource?docid=" + table.id, title=table.name, target="_blank", rel="noopener")
              svg
                use(xlink:href="#open-in-new")

    button.button(type="submit")
      svg.button__spinner.spinner
        use(xlink:href="#icon-spinner")
      span.button__text Export

  svg.svg-reference(xmlns="http://www.w3.org/2000/svg")
    symbol#open-in-new(viewBox="0 0 24 24")
      title Open Fusiontable
      path(d="M0 0h24v24H0z", fill="none")
      path(d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z" fill="currentColor")

    symbol#checkbox-outline(viewBox="0 0 24 24")
      title Select this Fusiontable
      path(d="M0 0h24v24H0z", fill="none")
      path(d="M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" fill="currentColor")

    symbol#checkbox-checked(viewBox="0 0 24 24")
      title Deselect this Fusiontable
      path(d="M0 0h24v24H0z", fill="none")
      path(d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" fill="currentColor")
